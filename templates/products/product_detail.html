{% extends 'base.html' %}
{% load static %}

{% block title %}{{ product.name }} | {{ company_name }}{% endblock %}

{% block content %}
<!-- Page Hero / Breadcrumb -->
<section class="page-hero" style="padding: 100px 0 40px;">
    <div class="container" data-aos="fade-up">
        <div style="display: flex; gap: 0.5rem; font-size: 0.85rem; opacity: 0.6; margin-bottom: 2rem; text-transform: uppercase; font-weight: 700; letter-spacing: 1px;">
            <a href="{% url 'products:landing' %}">Products</a>
            <span>/</span>
            <a href="{{ product.category.get_absolute_url }}">{{ product.category.name }}</a>
            <span>/</span>
            <span>{{ product.name }}</span>
        </div>
    </div>
</section>

<section class="section" style="margin-top: -60px;">
    <div class="container">
        <div class="grid grid-2" style="gap: 5rem; align-items: start;">
            
            <!-- Product visuals -->
            <div data-aos="fade-right">
                <div class="card" style="padding: 4rem; display: flex; align-items: center; justify-content: center; background: white;">
                    {% if product.image %}
                    <img src="{{ product.image.url }}" alt="{{ product.name }}" style="max-height: 450px; width: auto; object-fit: contain;">
                    {% else %}
                    <i class="fas fa-box" style="font-size: 8rem; color: var(--border);"></i>
                    {% endif %}
                </div>
                
                <div class="grid grid-3" style="margin-top: 2rem;">
                    <div class="card" style="padding: 1.5rem; text-align: center; border-color: var(--border);">
                        <i class="fas fa-certificate" style="color: var(--accent-dark); font-size: 1.5rem; margin-bottom: 0.5rem;"></i>
                        <p style="font-size: 0.75rem; font-weight: 700; text-transform: uppercase;">ZDHC Certified</p>
                    </div>
                    <div class="card" style="padding: 1.5rem; text-align: center; border-color: var(--border);">
                        <i class="fas fa-vial" style="color: var(--accent-dark); font-size: 1.5rem; margin-bottom: 0.5rem;"></i>
                        <p style="font-size: 0.75rem; font-weight: 700; text-transform: uppercase;">Lab Tested</p>
                    </div>
                    <div class="card" style="padding: 1.5rem; text-align: center; border-color: var(--border);">
                        <i class="fas fa-leaf" style="color: var(--accent-dark); font-size: 1.5rem; margin-bottom: 0.5rem;"></i>
                        <p style="font-size: 0.75rem; font-weight: 700; text-transform: uppercase;">Eco-Safety</p>
                    </div>
                </div>
            </div>

            <!-- Product details -->
            <div data-aos="fade-left">
                <span style="color: var(--accent-dark); font-weight: 800; font-size: 0.85rem; text-transform: uppercase; letter-spacing: 2px;">{{ product.category.name }}</span>
                <h1 style="font-size: 3rem; margin-top: 0.5rem; margin-bottom: 1.5rem; line-height: 1.2;">{{ product.name }}</h1>
                
                <p style="font-size: 1.15rem; color: var(--text-muted); margin-bottom: 2.5rem; line-height: 1.8;">{{ product.short_description }}</p>
                
                <div style="background: var(--bg-white); border: 1px solid var(--border); border-radius: var(--radius-md); padding: 2.5rem; margin-bottom: 3rem; box-shadow: var(--shadow-sm);">
                    <h4 style="margin-bottom: 1rem; color: var(--primary);">Quick Specs</h4>
                    <ul style="display: grid; gap: 0.75rem;">
                        <li style="display: flex; justify-content: space-between; border-bottom: 1px solid var(--bg-light); padding-bottom: 0.5rem;">
                            <span style="font-weight: 600; color: var(--text-muted);">Purity Level</span>
                            <span style="font-weight: 700;">99.9% (Standard)</span>
                        </li>
                        <li style="display: flex; justify-content: space-between; border-bottom: 1px solid var(--bg-light); padding-bottom: 0.5rem;">
                            <span style="font-weight: 600; color: var(--text-muted);">CAS Number</span>
                            <span style="font-weight: 700;">{{ product.id|add:1050 }}X-YY-Z</span>
                        </li>
                        <li style="display: flex; justify-content: space-between;">
                            <span style="font-weight: 600; color: var(--text-muted);">Packaging</span>
                            <span style="font-weight: 700;">Customizable</span>
                        </li>
                    </ul>
                </div>

                <div style="display: flex; gap: 1.5rem; flex-wrap: wrap;">
                    <a href="{% url 'inquiries:add_to_quote' product.id %}" class="btn btn-primary" style="padding: 1.25rem 3.5rem; font-size: 1rem;">
                        <i class="fas fa-plus" style="margin-right: 10px;"></i> Add to Quote List
                    </a>
                    <a href="{% url 'core:contact' %}" class="btn btn-outline" style="padding: 1.25rem 2.5rem;">
                        <i class="far fa-envelope" style="margin-right: 10px;"></i> Contact Sales
                    </a>
                </div>
            </div>
        </div>

        <!-- Technical Tabs -->
        <div style="margin-top: 80px;" data-aos="fade-up">
            <div style="display: flex; gap: 2rem; border-bottom: 2px solid var(--border); margin-bottom: 3rem;">
                <button style="padding-bottom: 1rem; font-weight: 700; color: var(--primary); border-bottom: 3px solid var(--accent); background: none; border-top: none; border-left: none; border-right: none; cursor: pointer; font-size: 1.1rem;">Full Description</button>
                <button style="padding-bottom: 1rem; font-weight: 700; color: var(--text-muted); background: none; border: none; cursor: pointer; font-size: 1.1rem; opacity: 0.6;">Applications</button>
                <button style="padding-bottom: 1rem; font-weight: 700; color: var(--text-muted); background: none; border: none; cursor: pointer; font-size: 1.1rem; opacity: 0.6;">Technical Data Sheet (TDS)</button>
            </div>
            
            <div class="card" style="padding: 4rem; border: none; box-shadow: var(--shadow-md);">
                <div style="max-width: 800px; margin: 0 auto; line-height: 2;">
                    {{ product.description|linebreaks }}
                </div>

                <!-- QR Code Section -->
                <div style="margin-top: 4rem; border-top: 1px solid var(--bg-light); padding-top: 3rem; text-align: center;">
                    <div style="max-width: 200px; margin: 0 auto;">
                        <h4 style="margin-bottom: 1.5rem; font-size: 1rem; color: var(--primary);">Scan QR Code for Certification</h4>
                        <div class="card" style="padding: 1rem; background: white; display: inline-block;">
                            {% if product.qr_code %}
                            <img src="{{ product.qr_code.url }}" alt="Certification QR Code for {{ product.name }}" style="width: 150px; height: 150px;">
                            {% else %}
                            <div style="width: 150px; height: 150px; background: var(--bg-light); display: flex; align-items: center; justify-content: center; color: var(--text-muted); font-size: 0.8rem;">
                                QR Code Placeholder
                            </div>
                            {% endif %}
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Related Products -->
<section class="section" style="background: var(--bg-white); border-top: 1px solid var(--border);">
    <div class="container">
        <div style="margin-bottom: 3rem;">
            <h2>Related Solutions</h2>
            <p style="color: var(--text-muted);">Professionals who use this also considered these specialized chemicals.</p>
        </div>
        
        <div class="grid grid-4">
            {% for related in product.category.product_set.all|slice:":4" %}
            {% if related.id != product.id %}
            <a href="{{ related.get_absolute_url }}" class="card" style="padding: 1.5rem; text-align: center;">
                <div style="height: 120px; display: flex; align-items: center; justify-content: center; margin-bottom: 1.5rem;">
                    {% if related.image %}
                    <img src="{{ related.image.url }}" style="max-height: 100%; max-width: 100%; object-fit: contain;">
                    {% else %}
                    <i class="fas fa-box" style="font-size: 2.5rem; color: var(--border);"></i>
                    {% endif %}
                </div>
                <h4 style="font-size: 0.95rem; line-height: 1.4; color: var(--primary);">{{ related.name }}</h4>
                <div style="margin-top: 1rem; color: var(--accent-dark); font-weight: 700; font-size: 0.75rem; text-transform: uppercase;">View Details</div>
            </a>
            {% endif %}
            {% endfor %}
        </div>
    </div>
</section>

{% endblock %}
