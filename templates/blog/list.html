{% extends 'base.html' %}
{% load static %}

{% block title %}Industry Insights | {{ company_name }}{% endblock %}

{% block content %}
<!-- Page Hero -->
<section class="page-hero">
    <div class="container" data-aos="fade-up">
        <h1 style="color: white;">Industry Insights</h1>
        <p>Technical whitepapers, market updates, and laboratory breakthroughs from the Nasim and Sons R&D division.</p>
    </div>
</section>

<!-- Blog Grid -->
<section class="section">
    <div class="container">
        
        <!-- Optional: Featured Post (First one) -->
         {% if posts.0 %}
         <div class="card" style="display: grid; grid-template-columns: 1.2fr 0.8fr; gap: 0; margin-bottom: 5rem; min-height: 450px;" data-aos="fade-up">
             <div style="position: relative; background: var(--bg-light);">
                 {% if posts.0.image %}
                 <img src="{{ posts.0.image.url }}" alt="{{ posts.0.title }}" style="width: 100%; height: 100%; object-fit: cover;">
                 {% else %}
                 <div style="width: 100%; height: 100%; display: flex; align-items: center; justify-content: center; color: var(--border);">
                     <i class="fas fa-newspaper" style="font-size: 5rem;"></i>
                 </div>
                 {% endif %}
                 <div style="position: absolute; top: 30px; left: 30px; background: var(--accent); color: var(--primary); padding: 8px 20px; font-weight: 800; border-radius: 4px; font-size: 0.8rem; text-transform: uppercase; letter-spacing: 1px;">
                    Featured Analysis
                 </div>
             </div>
             <div style="padding: 4rem; display: flex; flex-direction: column; justify-content: center;">
                 <span style="color: var(--text-muted); font-weight: 700; font-size: 0.85rem; margin-bottom: 1rem;">{{ posts.0.created_at|date:"F d, Y" }}</span>
                 <h2 style="font-size: 2.2rem; margin-bottom: 1.5rem; line-height: 1.2;">{{ posts.0.title }}</h2>
                 <p style="color: var(--text-muted); font-size: 1.1rem; line-height: 1.8; margin-bottom: 2.5rem;">
                     {{ posts.0.content|striptags|truncatewords:35 }}
                 </p>
                 <a href="{{ posts.0.get_absolute_url }}" class="btn btn-primary" style="align-self: flex-start;">Read Full Analysis</a>
             </div>
         </div>
         {% endif %}

        <div class="grid grid-3">
            {% for post in posts %}
                {% if not forloop.first %} <!-- Skip first since it's featured -->
                <div class="card" data-aos="fade-up" data-aos-delay="{{ forloop.counter0|add:1 }}00">
                    <div style="height: 220px; background: var(--bg-light); overflow: hidden;">
                        {% if post.image %}
                        <img src="{{ post.image.url }}" alt="{{ post.title }}" style="height: 100%; width: 100%; object-fit: cover; transition: var(--transition);">
                        {% else %}
                        <div style="height: 100%; display: flex; align-items: center; justify-content: center; color: var(--border);">
                            <i class="far fa-file-alt" style="font-size: 3rem;"></i>
                        </div>
                        {% endif %}
                        <style>
                            .card:hover img { transform: scale(1.05); }
                        </style>
                    </div>
                    <div style="padding: 2rem;">
                         <div style="font-size: 0.8rem; color: var(--text-muted); font-weight: 700; margin-bottom: 0.75rem;">
                            {{ post.created_at|date:"F d, Y" }}
                        </div>
                        <h3 style="font-size: 1.25rem; line-height: 1.4; margin-bottom: 1rem;">
                            <a href="{{ post.get_absolute_url }}" style="color: var(--primary);">{{ post.title }}</a>
                        </h3>
                        <p style="color: var(--text-muted); font-size: 0.95rem; line-height: 1.6; margin-bottom: 1.5rem; height: 3.2em; overflow: hidden;">
                            {{ post.content|striptags|truncatewords:15 }}
                        </p>
                        <a href="{{ post.get_absolute_url }}" style="color: var(--accent-dark); font-weight: 800; font-size: 0.85rem; text-transform: uppercase;">Continue Reading &rarr;</a>
                    </div>
                </div>
                {% endif %}
            {% empty %}
                <div style="grid-column: 1 / -1; text-align: center; padding: 5rem 0;">
                    <h3 style="color: var(--text-muted);">No insights published yet.</h3>
                </div>
            {% endfor %}
        </div>
        
    </div>
</section>

{% endblock %}
